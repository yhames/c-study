# 전문가를 위한 C - Chapter 3 목적파일 : 정적 라이브러리

- [전문가를 위한 C - Chapter 3 목적파일 : 정적 라이브러리](#전문가를-위한-c---chapter-3-목적파일--정적-라이브러리)
  - [정적 라이브러리](#정적-라이브러리)

## 정적 라이브러리

`정적 라이브러리`는 `재배치 가능한 목적파일`들을 하나로 묶어서 만든 `아카이브`이다. `정적 라이브러리`는 `재배치 가능한 목적 파일`과 함께 `링크`되어 `실행 가능한 목적 파일`을 생성한다.

`정적 라이브러리` 자체는 목적 파일이라고 볼 수 없으며, 목적 파일을 위한 컨테이너라고 할 수 있다. 즉, 목적 파일 형식을 따르지 않고 단지 `ar` 유틸리티로 파일을 아카이브할 뿐이다.

먼저 `재배치 가능한 목적 파일`에서 `정적 라이브러리`를 추출하려고 시도하면,
`정적 라이브러리`를 찾고, 해당 `정적 라이브러리`에서 정의되지 않은 `심벌`을 찾아 해결한다.

`정적 라이브러리`는 `UNIX` 계열에서는 `lib`로 시작하고 `.a` 확장자를 갖는 반면, `Windows` 계열에서는 `.lib` 확장자를 갖는다.

`UNIX`에서 아카이브 도구는 `ar` 유틸리티를 사용한다.

다음은 `libgeometry.a` `정적 라이브러리`를 `생성`하는 명렁어이다.
```bash
ar crs libgeometry.a trigon.o 2d.o 3d.o
```

다음 명령어로 `libgeometry.a` `정적 라이브러리`를 가져와 `링크`할 수 있다.

```bash
gcc main.o -L./ -lgeometry.a -lm -o ex3_3.out
```

링크 이후 최종 실행파일은 `정적 라이브러리`를 내부에 `포함`(embed)한다.
따라서 `정적 라이브러리`가 많아질수록 `재배치 가능한 목적 파일`도 많아지고, 최종 파일의 크기도 커진다.

최종 파일의 크기를 줄이기 위해서는 `공유 라이브러리`(혹은 `동적 라이브러리`)를 사용해야한다.

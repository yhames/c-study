# 전문가를 위한 C - Chapter 3 목적파일 : 재배치 가능한 목적 파일

- [전문가를 위한 C - Chapter 3 목적파일 : 재배치 가능한 목적 파일](#전문가를-위한-c---chapter-3-목적파일--재배치-가능한-목적-파일)
  - [재배치 가능한 목적 파일](#재배치-가능한-목적-파일)

## 재배치 가능한 목적 파일

재배치 가능한 목적 파일은 어셈블러 단계의 결과물이다.
재배치 가능한 목적 파일에는 다음과 같은 내용이 포함된다.
* `함수`에 대한 기계 수준 명령어(혹은 코드)
* 초기화된 `전역번수`의 값(혹은 데이터)
* 정의되거나 참조된 심벌들을 포함하는 `심벌테이블`

재배치 가능하다는 것은 문자 그대로 명령어가 `이동`하거나 `재배치`될 수 있다는 것이다.

`ExtremeC_examples_chapter3_1` 예시를 보면 재배치된다는 의미를 알 수 있다.

다음은 `ExtremeC_examples_chapter3_1.funcs.c`의 목적 파일 `funcs.o`의 심벌 테이블이다.

```bash
0000000000000000 T _max
0000000000000048 T _max_3
0000000000000000 t ltmp0
00000000000000b0 s ltmp1
```

함수 `_max`와 `_max_3`의 주소를 살펴보면 각각 `0000000000000000`와 `0000000000000048`에 할당되어있다.
이는 `심벌`에 관련된 명령어가 `0`부터 시작하고 서로 인접했다는 의미로 해석할 수 있다.

다음은 `ExtremeC_examples_chapter3_1.c`의 목적 파일 `main.o`의 심벌 테이블이다.

```bash
0000000000000060 D _a
0000000000000064 D _b
0000000000000000 T _main
                 U _max
                 U _max_3
0000000000000000 t ltmp0
0000000000000060 d ltmp1
0000000000000068 s ltmp2
```

`main.o`도 마찬가지로 0번부터 시작하여 서로 인접하게 할당되어있는 것을 알 수 있다.
또한 `_max`와 `_max_3`는 주소가 할당되어있지 않다.

두 가지 `재배치 가능 목적 파일`의 `심벌 테이블`을 비교했을 때
중복되는 주소에 `심벌`이 할당되는 것을 볼 수 있다.

링커 단계 이후에 실행 파일이 생성되면 해당 주소는 변경된다.
즉, `재배치 가능한 목적 파일`에서 할당된 주소는 최종적이거나 절대적인 주소가 아니라는 것이다.






